<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>state</title>
</head>
<body>
    <div id="box"></div>
    <script src="../react_js/react.development.js"></script>
    <script src="../react_js/react-dom.development.js"></script>
    <script src="../react_js/babel.min.js"></script>

    <script type="text/babel">
        class A extends React.Component{
            state = {
                count: 1
            }

            test1 = () => {
                this.setState( state => ({ count: state.count + 1 }) );
                console.log('test1  setState()之后', this.state.count);
            }

            test2 = () => {
                // const count = this.state.count + 1;
                // this.setState({
                //     count
                // });
                this.setState({
                    count: 3
                });
                console.log('test2  setState()之后', this.state.count);

            }

            test3 = () => {
                this.setState( state => ({ count: state.count + 1 }), () => { // 这个回调函数调用时间点：在状态更新且界面更新之后回调
                    console.log('test3  setState() callback()', this.state.count);
                });

            }

            render(){
                console.log("A render()");

                return (
                    <div>
                        <h1>A组件：{this.state.count}</h1>
                        <button onClick={this.test1}>A 测试1</button>&nbsp;&nbsp;
                        <button onClick={this.test2}>A 测试2</button>&nbsp;&nbsp;
                        <button onClick={this.test3}>A 测试3</button>&nbsp;&nbsp;
                    </div>
                )
            }
        }
        ReactDOM.render(<A />, document.getElementById('box'));

    </script>

</body>
</html>